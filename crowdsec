Excelente decis√£o! Vou te entregar um guia claro, detalhado e did√°tico, estruturado como registro fiel do que fizemos, incluindo os comandos e coment√°rios de cada etapa, para que voc√™ replique facilmente quando quiser.

---

## üõ°Ô∏è Documenta√ß√£o: Instala√ß√£o & Replica√ß√£o do WireGuard com CrowdSec em Ubuntu Oracle Cloud

---

### **0. Pr√©-requisito**

- M√°quina Ubuntu j√° criada e acess√≠vel via SSH na Oracle Cloud.
- WireGuard j√° instalado e funcionando (caso for s√≥ replicar a seguran√ßa).

---

### **1. Conex√£o na m√°quina**

```bash
ssh -i sua-chave.key ubuntu@IP_DA_VM
```
Acesse como root ou usu√°rio com sudo.

---

### **2. Atualiza√ß√£o do sistema**

```bash
sudo apt update && sudo apt upgrade -y
```
Garante que todas as depend√™ncias estejam atuais.

---

### **3. Instala√ß√£o do CrowdSec**

Adiciona o reposit√≥rio oficial e instala:

```bash
curl -s https://install.crowdsec.net | sudo sh
sudo apt install crowdsec -y
```
> O primeiro comando prepara o reposit√≥rio, o segundo instala o CrowdSec.

---

### **4. Instala√ß√£o do bouncer do CrowdSec (respons√°vel pelo bloqueio no firewall)**

```bash
sudo apt install crowdsec-firewall-bouncer-iptables -y
```
O bouncer l√™ as decis√µes do CrowdSec e bloqueia automaticamente atacantes pelo iptables.

---

### **5. Verifica√ß√£o dos servi√ßos**

Depois de instalado:

```bash
sudo systemctl status crowdsec
sudo systemctl status crowdsec-firewall-bouncer
```
Ambos devem aparecer como ‚Äúactive (running)‚Äù.

---

### **6. Confer√™ncia das pol√≠ticas ativas**

Ver cen√°rios de ataque monitorados (regras de seguran√ßa):

```bash
sudo cscli scenarios list
```
Ver parsers ativos (tipos de log analisados):

```bash
sudo cscli parsers list
```
Ver IPs bloqueados no momento:

```bash
sudo cscli decisions list
```
Ver hist√≥rico de alertas:

```bash
sudo cscli alerts list
```

---

### **7. Como ajustar/replicar pol√≠ticas (opcional)**

- Se quiser padronizar configura√ß√µes customizadas, copie os arquivos YAML de `/etc/crowdsec/scenarios/` e `/etc/crowdsec/parsers/` entre as m√°quinas.
- Para garantir tudo atualizado:

```bash
sudo cscli hub update
sudo cscli collections upgrade
sudo systemctl restart crowdsec crowdsec-firewall-bouncer
```

---

### **8. Teste e monitoramento**

Para validar:

- Rode novamente `cscli decisions list` e veja IPs bloqueados.
- Se for abrir outros servi√ßos al√©m de SSH, instale cen√°rios adicionais da CrowdSec com:

```bash
sudo cscli scenarios install crowdsecurity/nginx-bf   # exemplo para nginx
```
Consulte a [documenta√ß√£o oficial](https://docs.crowdsec.net/) para aplica√ß√µes espec√≠ficas.

---

### **9. Como clonar configura√ß√µes entre VMs**

Voc√™ pode:
- Copiar os arquivos de cen√°rio/parsers via `scp`.
- Rodar novamente todo o procedimento acima (sem perigo de duplicidade!).

---

### **Notas e Dicas importantes**

- **CrowdSec √© modular:** S√≥ monitora (`parsers`) e bloqueia (`scenarios`) o que voc√™ ativar.
- **A cada atualiza√ß√£o** de sistema, rode o upgrade do CrowdSec tamb√©m para manter a seguran√ßa no topo.
- **Toda m√°quina nova pode receber exatamente esse procedimento**: comandos s√£o universais para qualquer Ubuntu 20.04 ou superior em nuvem.

---

### **Exemplo de comandos para replicar:**

```bash
sudo apt update && sudo apt upgrade -y
curl -s https://install.crowdsec.net | sudo sh
sudo apt install crowdsec -y
sudo apt install crowdsec-firewall-bouncer-iptables -y
sudo cscli hub update
sudo cscli collections upgrade
sudo systemctl restart crowdsec crowdsec-firewall-bouncer
sudo cscli scenarios list
sudo cscli parsers list
sudo cscli decisions list
```

---

### **Resumo final**

Voc√™ agora domina o ciclo de instalar, rodar, monitorar e replicar uma prote√ß√£o de alto n√≠vel com CrowdSec para qualquer VM exposta, sem mist√©rio e com todos os comandos essenciais nesta receita.  
Basta seguir esse passo a passo em qualquer nova inst√¢ncia/pasta do seu DevOps e estar√° protegido.

Se quiser este conte√∫do em PDF/Markdown ou precisa de um roteiro de backup/restaura√ß√£o das configs YAML, s√≥ avisar!
